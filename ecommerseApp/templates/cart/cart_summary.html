{% extends 'store/base.html' %}
{% block content %}

    <div class="container product-page mt-5 cart-summary">
        <section class="cart-header">
            <h4 class="product-header">Product</h4>
            <h4 class="product-quantity">Quantity</h4>
            <h4>Total</h4>
        </section>
        {% if cart_products %}
            {% for product in cart_products %}
                <div class="cart-info">
                    <section class="product-info">
                        <div class="image-container">
                            <img src="{{ product.image.url }}" class="img-fluid rounded-start" alt="{{ product.name }}">
                        </div>
                        <div class="product-desc">
                            <h3 class="card-title">{{ product.name }}</h3>
                            <p class="card-text fs-5"><b>Price: </b>
                                <small class="product-price">
                                    {% if not product.is_on_sale %}
                                        {{ product.price }}
                                    {% else %}
                                        {{ product.sale_price }}
                                    {% endif %}
                                </small>
                            </p>
                        </div>
                    </section>

                    <section class="quantity-section">
                        <button type="button" value="{{ product.id }}"
                                class="btn btn-secondary" id="add-cart">Quantity
                        </button>
                    </section>

                    <section class="total-sum-per-product">
                        total
                    </section>
                </div>
            {% endfor %}
        {% else %}
            <h3>The cart is empty</h3>
        {% endif %}
        <h2 class="total-price"></h2>
    </div>


    <script>
        let prices = document.querySelectorAll(".product-price");
        let totalPrice = 0;

        prices.forEach(price => {
            let priceValue = parseFloat(price.textContent.trim());
            console.log(priceValue)
            if (!isNaN(priceValue)) {
                totalPrice += priceValue;
            }
        });

        let h2PriceEl = document.querySelector(".total-price");
        h2PriceEl.textContent = `Grand Total: ${totalPrice.toFixed(2)}`;

    </script>

{% endblock %}





{#    <div class="container product-page mt-5 cart-summary">#}
{#        {% if  cart_products %}#}
{#            <section class="cart-header">#}
{#                <h4>Product</h4>#}
{#                <h4>Qunatity</h4>#}
{#                <h4>Total Sum</h4>#}
{#            </section>#}
{#            {% for product in cart_products %}#}
{#                <div class="mb-3 product-section">#}
{#                    <div class="row g-0 p-2 ps-5">#}
{#                        <div class="col-md-4 image-container">#}
{#                            <img src="{{ product.image.url }}" class="img-fluid rounded-start" alt="{{ product.name }}">#}
{#                        </div>#}
{#                        <div class="col-md-4">#}
{#                            <div class="card-body">#}
{#                                <center>#}
{#                                    <h3 class="card-title">{{ product.name }}</h3>#}
{##}
{#                                    <p class="card-text fs-5"><b>Price: </b>#}
{#                                        <small class="product-price">#}
{#                                            {% if not product.is_on_sale %}#}
{#                                                {{ product.price }}#}
{#                                            {% else %}#}
{#                                                {{ product.sale_price }}#}
{#                                            {% endif %}#}
{#                                        </small>#}
{#                                    </p>#}
{##}
{#                                    <button type="button" value="{{ product.id }}"#}
{#                                            class="btn btn-secondary" id="add-cart">Add to Cart#}
{#                                    </button>#}
{#                                </center>#}
{#                            </div>#}
{##}
{#                        </div>#}
{##}
{#                    </div>#}
{##}
{#                </div>#}
{##}
{#            {% endfor %}#}
{#        {% else %}#}
{#            <h3>The cart is empty</h3>#}
{#        {% endif %}#}
{#        <h2 class="total-price"></h2>#}
{#    </div>#}
